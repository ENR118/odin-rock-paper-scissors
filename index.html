<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <button id="rock-button">ROCK</button>
    <button id="paper-button">PAPER</button>
    <button id="scissors-button">SCISSORS</button>
    <div id="result"></div>

    <script>
        let player_score = 0;
        let computer_score = 0;
        let player_choice = "";
        let result = "";
        const buttons = document.querySelectorAll("button");

        function get_computer_choice() {
            let ran = Math.random();
            if (ran < 0.33) {
                return "rock";
            } else if (ran < 0.66) {
                return "paper";
            } else {
                return "scissors";
            }
        }

        function get_player_choice() {
            return prompt("make your choice: rock, paper, scissors");
        }

        function play_round(player_choice, computer_choice) {
            const choice = player_choice.toLowerCase();

            console.log("player choice: " + choice);
            console.log("computer choice: " + computer_choice);

            switch (choice) {
                case "rock":
                    if (computer_choice === "paper") {
                        console.log("computer victory");
                        computer_score++;
                    } else if (computer_choice === "scissors") {
                        console.log("player victory");
                        player_score++;
                    } 
                    break;
                case "paper":
                    if (computer_choice === "scissors") {
                        console.log("computer victory");
                        computer_score++;
                    } else if (computer_choice === "rock") {
                        console.log("player victory");
                        player_score++;
                    } 
                    break;
                case "scissors":
                    if (computer_choice === "rock") {
                        console.log("computer victory");
                        computer_score++;
                    } else if (computer_choice === "paper") {
                        console.log("player victory");
                        player_score++;
                    } 
                    break;
            }

            result = player_score + " | " + computer_score;
            document.getElementById("result").innerHTML = result;
        }

        function play_game() {
            let computer_choice = get_computer_choice();
            play_round(player_choice, computer_choice);

            if (player_score === 5 || computer_score === 5) {
                console.log("FINAL player score: " + player_score);
                console.log("FINAL computer score: " + computer_score);

                if (player_score > computer_score) {
                    console.log("player victory");
                    result = "player victory";
                } else if (computer_score > player_score) {
                    console.log("computer victory");
                    result = "computer victory";
                } else {
                    console.log("tie");
                    result = "tie";
                }

                document.getElementById("result").innerHTML = result;
            }
        }

        buttons.forEach((button) => {
            button.addEventListener("click", function (e) {
                if (e.target.id == "rock-button") {
                    player_choice = "rock";
                }

                if (e.target.id == "paper-button") {
                    player_choice = "paper";
                }

                if (e.target.id == "scissors-button") {
                    player_choice = "scissors";
                }

                play_game();
            })
        })
    </script>
</body>
</html>